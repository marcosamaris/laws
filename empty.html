<!doctype html>
<html>

<head>
  <title>Project Title</title>
  <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1">
  <link href="css/frame.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="css/controls.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="css/custom.css" media="screen" rel="stylesheet" type="text/css" />
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700' rel='stylesheet' type='text/css'>
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="js/menu.js"></script>
  
  
  <style>
    .menu-index {
      color: rgb(255, 255, 255) !important;
      opacity: 1 !important;
      font-weight: 700 !important;
    }
  </style>
</head>

<body>

<div class="menu-container"><div class="menu">
  <div class="menu-table flex-row-space-between">
    <div class="logo flex-row-center">
      <a href="index.html">Language Annotation Web System - LAWS</a>
    </div>
    <a class="menu-button" tabindex="0" href="javascript:void(0)">
      <img class="noselect" src="img/menu.png">
    </a>
    <div class="menu-items flex-row-center flex-item">
      <a href="http://yenchiah.wordpress.com/">Open Project</a>
      <a href="file/CV.pdf">New Project</a>
      <a href="http://www.linkedin.com/pub/yen-chia-hsu/58/a26/716">Save Project</a>
      <a href="https://twitter.com/yenchiah">Export Liers</a>
    </div>
  </div>
</div></div>
  <div class="menu-container"></div>
  <div class="content-container">
    <div class="content">
      <div class="content-table flex-column">
        <div class="flex-row">
          <div class="flex-item flex-column">
          </div>
          <div class="flex-item flex-column">
<form >
<div class="flex-row">
  <div class="flex-row">
          <div class="flex-item flex-item-stretch flex-column">
            <video height="270" width="430" poster="img/dummay-img.png" class="image">
              <source src="unknown" type="video/*">
            </video>

            <audio height="270" width="430" controls class="image">
                <source src="unknown" type="audio/*">
            </audio>
            <div class="control-group">
  
              <button type="button" class="custom-button-flat" onclick="fileStop()"><img src="img/previous_final.png"></button>
              <button type="button" class="custom-button-flat" onclick="fileBack()"><img src="img/previous_enquedrament.png"></button>
              <button type="button" class="custom-button-flat" onclick="fileNext()"><img src="img/previous_1_second.png"></button>
              <button type="button" class="custom-button-flat" onclick="filePlay()"><img src="img/previous_frame.png"></button>
              <button type="button" class="custom-button-flat" onclick="filePause()"><img src="img/previous_pixel.png"></button>
              <button type="button" class="custom-button-flat" onclick="fileStop()"><img src="img/play_.png"></button>
              <button type="button" class="custom-button-flat" onclick="fileBack()"><img src="img/next_pixel.png"></button>
              <button type="button" class="custom-button-flat" onclick="fileNext()"><img src="img/next_frame.png"></button>
              <button type="button" class="custom-button-flat" onclick="fileBack()"><img src="img/next_1_second.png"></button>
              <button type="button" class="custom-button-flat" onclick="fileNext()"><img src="img/next_enquedrament.png"></button>
              <button type="button" class="custom-button-flat" onclick="fileNext()"><img src="img/next_final.png"></button>
            </div>
            
          </div>
          
          <div class="flex-item flex-column">

            <p class="text text-large">
              Video: <input type="file" accept="video/*" name="video" class="file_here"><br>  
              Audio: <input type="file" accept="audio/*" name="audio" class="file_here"><br>                
              <input type="button" value="Submit" onclick="loadFile()">
            </p>
          </div>
        </div>
        <div class="flex-row">




</form>





          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="waveform"></div>

  <script src="https://unpkg.com/wavesurfer.js"></script>
  
  <script>

    var wavesurfer = WaveSurfer.create({
        container: document.querySelector('#waveform'),
        waveColor: '#000000',
        progressColor: '#F5f5f5',
        backend: 'MediaElement'
    });

    function loadFile(){
      
      var video = document.querySelector('video');
      var audio = document.querySelector('audio');
      var file = document.getElementsByClassName('file_here');
      //var inputs = document.querySelectorAll('.file_here')
      //var file = document.getElementsByClassName('file_here').files
      wavesurfer.setCursorColor();
      
      
      reader = new FileReader();
      reader.onloadend = function() {
        if(file[0].files.length == 1){
          video.src = reader.result;
          video.play();
          wavesurfer.load(video);
          wavesurfer.play();
          document.querySelector("audio").style.display = "none";
          
        }
        else if(file[1].files.length == 1){
          audio.src = reader.result;
          audio.play();
          
          wavesurfer.load(audio);
          wavesurfer.play();
          document.querySelector("video").style.display = "none";

          
        }
        
      }
      
      if (file[0].files[0]){
        console.log("video: " + file[0].files[0])
        reader.readAsDataURL(file[0].files[0]);
      }
      else if (file[1].files[0]){
        console.log("audio: " + file[1].files[0])
        reader.readAsDataURL(file[1].files[0]);
      }
      else{
        video.src="";
      }
      
    }

    function filePause(){
      video = document.querySelector('video');
      if(video.src){
        video.pause();
        console.log(video.controller);
      }
    }

    function filePlay(){
      video = document.querySelector('video');
      if(video.src){
        video.play();
      }
    }

    function fileStop(){
      video = document.querySelector('video');
      if(video.src){
        video.currentTime = 0;
        video.pause();
      }
    }

    function fileBack(){
      video = document.querySelector('video');
      if(video.src){
        tempo = video.currentTime;
        video.currentTime = tempo-5;
      }
    }

    function fileNext(){
      video = document.querySelector('video');
      if(video.src){
        tempo = video.currentTime;
        video.currentTime = tempo+5;
      }

    }

  </script>
</body>

</html>
