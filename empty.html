<!doctype html>
<html>

<head>
  <title>Laws</title>
  <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1">
  <link href="css/frame.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="css/controls.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="css/custom.css" media="screen" rel="stylesheet" type="text/css" />
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700' rel='stylesheet' type='text/css'>
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="js/menu.js"></script>
  
  
  <style>
    .menu-index {
      color: rgb(255, 255, 255) !important;
      opacity: 1 !important;
      font-weight: 700 !important;
    }
  </style>
</head>

<body>

  <div class="menu-container"><div class="menu">
    <div class="menu-table flex-row-space-between">
      <div class="logo flex-row-center">
        <a href="index.html">Language Annotation Web System - LAWS</a>
      </div>
      <a class="menu-button" tabindex="0" href="javascript:void(0)">
        <img class="noselect" src="img/menu.png">
      </a>
      <div class="menu-items flex-row-center flex-item">
        <a href="http://yenchiah.wordpress.com/">Open Project</a>
        <a href="file/CV.pdf">New Project</a>
        <a href="http://www.linkedin.com/pub/yen-chia-hsu/58/a26/716">Save Project</a>
        <a href="https://twitter.com/yenchiah">Export Liers</a>
      </div>
    </div>
  </div></div>

  
  <div class="content-container">
    <div class="content">
      <div class="content-table flex-column">
        <div class="flex-item flex-column"> 
          <div class="flex-row">
            <div class="flex-item flex-item-stretch flex-column">
              <video height="270" width="430" poster="img/dummay-img.png" class="image">
                <source src="unknown" type="video/*">
              </video>

              <audio height="270" width="430" controls class="image">
                  <source src="unknown" type="audio/*">
              </audio>
        
              <div class="control-group">
                <button type="button" class="custom-button-flat" onclick="filePreviousFinal()"><img src="img/previous_final.png"></button>
                <button type="button" class="custom-button-flat" onclick="filePreviousEnquadrament()"><img src="img/previous_enquedrament.png"></button>
                <button type="button" class="custom-button-flat" onclick="filePreviousSecond()"><img src="img/previous_1_second.png"></button>
                <button type="button" class="custom-button-flat" onclick="filePreviousFrame()"><img src="img/previous_frame.png"></button>
                <button type="button" class="custom-button-flat" onclick="filePreviousPixel()"><img src="img/previous_pixel.png"></button>
                <button type="button" class="custom-button-flat" onclick="filePlay()"><img src="img/play_.png"></button>
                <button type="button" class="custom-button-flat" onclick="fileNextPixel()"><img src="img/next_pixel.png"></button>
                <button type="button" class="custom-button-flat" onclick="fileNextFrame()"><img src="img/next_frame.png"></button>
                <button type="button" class="custom-button-flat" onclick="fileNextSecond()"><img src="img/next_1_second.png"></button>
                <button type="button" class="custom-button-flat" onclick="fileNextEnquadrament()"><img src="img/next_enquedrament.png"></button>
                <button type="button" class="custom-button-flat" onclick="fileNextFinal()"><img src="img/next_final.png"></button>
              </div>
            </div>
            <form>          
              <div class="flex-item flex-column">
                <p class="text text-large" id="inputs">
                  Video: <input type="file" accept="video/*" name="video" class="file_here"><br>  
                  Audio: <input type="file" accept="audio/*" name="audio" class="file_here"><br>                
                  <input type="button" value="Submit" onclick="loadFile()">
                </p>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="column column-one">
      <li id="tag-li-media"></li>
    </div>
    <div class="column column-two">
      <div id="waveform"><!-- Here be waveform --></div>
      <div id="wave-timeline"></div>
    </div>
  </div>

  <div class="row">
    <div class="column column-one">
          <li>Transcription</li>
          <li>Words</li>
          <li>Trasnlation</li>
          <li>Participant-note-en</li>
    </div>
    <div class="column column-two">
          <li><input type="text"></li>
          <li><input type="text"></li>
          <li><input type="text"></li>
          <li><input type="text"></li>
    </div>
  </div>

  <script src="https://unpkg.com/wavesurfer.js" type="text/javascript"></script>
  <script src="https://unpkg.com/wavesurfer.js/dist/plugin/wavesurfer.timeline.min.js" type="text/javascript"></script>
  <script src="timeline.js"></script>
  
  <script>

    var wavesurfer = WaveSurfer.create({
        container: document.querySelector('#waveform'),
        waveColor: '#000000',
        progressColor: '#f1f1f1',
        plugins: [
          WaveSurfer.timeline.create({
              container: "#wave-timeline",
              
          })
        ],
        backend: 'MediaElement'
    });

    function loadFile(){
      
      var video = document.querySelector('video');
      var audio = document.querySelector('audio');
      var file = document.getElementsByClassName('file_here');
      var element_Li = document.getElementById("tag-li-media");
      var inputs = document.getElementById('inputs');  
      inputs.style.display='none';

      wavesurfer.setCursorColor();
      
      reader = new FileReader();
      reader.onloadend = function() {
        if(file[0].files.length == 1){
          video.src = reader.result;
          video.play();
          wavesurfer.load(video);
          wavesurfer.play();
          document.querySelector("audio").style.display = "none";
          element_Li.textContent=file[0].files[0].name

          
        }
        else if(file[1].files.length == 1){
          audio.src = reader.result;
          audio.play();
          
          wavesurfer.load(audio);
          wavesurfer.play();
          document.querySelector("video").style.display = "none";
          element_Li.textContent=file[1].files[0].name
          
        }
        
      }
      
      if (file[0].files[0]){
        reader.readAsDataURL(file[0].files[0]);
      }
      else if (file[1].files[0]){
        reader.readAsDataURL(file[1].files[0]);
      }
      else{
        video.src="";
      }
      
    }

    function filePause(){
      video = document.querySelector('video');
      if(video.src){
        video.pause();
        console.log(video.controller);
      }
    }

    function filePlay(){
      video = document.querySelector('video');
      if(video.src){
        video.play();
      }
    }
    
    function fileNextPixel(){    }
    function fileNextFrame(){    }
    function fileNextSecond(){    }
    function fileNextEnquadrament(){    }
    function fileNextFinal(){    }
    function filePreviousPixel(){    }
    function filePreviousFrame(){    }
    function filePreviousSecond(){    }
    function filePreviousEnquadrament(){    }
    function filePreviousFinal(){    }

  </script>
</body>

</html>
